<!DOCTYPE html>
<html lang="en">

<head>
    <title>Free Open-Source Invoicing, Expenses &amp; Time-Tracking | Invoice Ninja</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="referrer" content="always">
    <link rel="canonical" href="https://invoiceninja.github.io/docs/self-host">
    <meta name="description" content="The leading free open-source online invoicing app for freelancers &amp; businesses. Invoice, accept payments, track expenses, create proposals, &amp; time-tasks">

    <link rel="stylesheet" href="/assets/build/css/main.css?id=098343128cd16893e85d">

    </head>

<nav class="py-4 sticky top-0 z-40 lg:z-50 w-full mx-auto bg-white border-b">
    <div id="navigation-content" class="flex items-center justify-between px-4 md:px-0 md:mx-auto max-w-8xl">
        <a href="/" id="left-side-logo">
            <img class="h-8"
                 src="/assets/images/logo.png"
                 alt="Invoice Ninja logo"/>
        </a>
        <section id="right-side-items" class="text-sm">
            <div class="hidden md:block md:space-x-5">
                <input type="text" placeholder="Quick search..."
                       class="px-4 py-2 border rounded hover:border-ninja-blue focus:border-ninja-blue focus:outline-none">
                <a href="/docs/getting-started" class="py-2 border-b border-transparent hover:border-ninja-blue">Documentation</a>
                <a href="https://app.swaggerhub.com/apis/invoiceninja/invoiceninja" target="_blank"
                   class="py-2 border-b border-transparent hover:border-ninja-blue">API Documentation</a>
                <a href="https://app.invoiceninja.com" class="px-5 py-2 border rounded-full hover:border-ninja-blue">Go
                    to app</a>
            </div>
            <div class="flex flex-col md:hidden">
                <button id="mobile-menu-toggle" class="focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-menu">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
            </div>
        </section>
    </div>
    <div id="mobile-menu" class="hidden px-4 pt-4 flex flex-col">
        <a href="/docs/getting-started"
           class="py-2 border-b border-transparent hover:border-ninja-blue">Documentation</a>
        <a href="https://app.swaggerhub.com/apis/invoiceninja/invoiceninja" target="_blank"
           class="py-2 border-b border-transparent hover:border-ninja-blue">API Documentation</a>
        <a href="https://app.invoiceninja.com" target="_blank"
           class="py-2 border-b border-transparent hover:border-ninja-blue">Go to app</a>
    </div>
</nav>
<body class="font-sans antialiased text-gray-900 bg-white ">
        <div class="max-w-8xl grid grid-cols-12 md:gap-16 py-4 mx-auto">
        <div class="hidden mr-4 space-y-6 md:block lg:col-span-2">
            <div class="hidden md:block fixed mt-2">
                                    <div clasS="mb-8">
                        <a class="block hover:text-ninja-blue font-semibold uppercase "
                           href="/docs/getting-started">User guide</a>

                        <div class="mt-2">
                                                            <a class="block hover:text-ninja-blue py-1 "
                                   href="/docs/introduction">Introduction</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                   href="/docs/clients">Clients</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                   href="/docs/products">Products</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                   href="/docs/invoices">Invoices</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                   href="/docs/payments">Payments</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                   href="/docs/settings">Settings</a>
                                                    </div>
                    </div>
                                    <div clasS="mb-8">
                        <a class="block hover:text-ninja-blue font-semibold uppercase "
                           href="/docs/developer-guide">Developer guide</a>

                        <div class="mt-2">
                                                    </div>
                    </div>
                                    <div clasS="mb-8">
                        <a class="block hover:text-ninja-blue font-semibold uppercase text-ninja-blue border-ninja-blue"
                           href="/docs/self-host">Self host</a>

                        <div class="mt-2">
                                                    </div>
                    </div>
                                    <div clasS="mb-8">
                        <a class="block hover:text-ninja-blue font-semibold uppercase "
                           href="/docs/migration">Migrating to V5</a>

                        <div class="mt-2">
                                                    </div>
                    </div>
                            </div>
        </div> <!-- End of sidebar -->

        <div class="col-span-12 md:col-span-7 p-4 prose mx-auto" style="max-width: 100% !important;" id="page-content">
            <h1>Installation</h1>

<h2>Server Requirements</h2>

<p>Invoice Ninja has a few system requirements. Built on top of <a href="www.laravel.com/docs/">Laravel</a> it requires a PHP and MySQL server at a minimum with the following version and extensions installed.</p>

<p> <div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>You need to setup this version completely from scratch. Do not attempt to overwrite your old version of Invoice Ninja (4.x.x) with this version as the two codebases are completely different.</span>
</div> </p>

<ul>
<li>PHP >= 7.3.x</li>
<li>bcmath extension</li>
<li>ctype extension</li>
<li>fileinfo extension</li>
<li>json extension</li>
<li>mbstring extension</li>
<li>openssl extension</li>
<li>PDO extension</li>
<li>tokenizer extension</li>
<li>xml extension</li>
<li>curl extension</li>
<li>zip extension</li>
<li>gmp extension</li>
<li>mysqli extension</li>
<li>MySQL / MariaDB Server</li>
</ul>

<h2>Installing Invoice Ninja</h2>

<h3>Installing on CentOS 8 / Ubuntu 20.04 (Recommended)</h3>

<p>Technically computers has a very helpful step by step guide on how to install Invoice Ninja v5 from scratch onto CentOS, you can access the guide <a href="https://forum.invoiceninja.com/t/install-invoice-ninja-v5-on-centos-8/4293">here</a>. If Ubuntu is more your flavour you can follow his awesome guide <a href="https://forum.invoiceninja.com/t/install-invoice-ninja-v5-on-ubuntu-20-04/4588">here</a></p>

<h3>Download pre built zip. (Advanced)</h3>

<iframe width="560" height="315" src="https://www.youtube.com/embed/i04EX7WXTVE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>A prebuilt zip can be downloaded from our GitHub release page <a href="https://github.com/invoiceninja/invoiceninja/releases">here</a>. You will  need to download the package which is appended with <b>-release</b>, download the file named invoiceninja.zip.</p>

<p>Unzip this file into the virtual host directory you have created.</p>

<p> <div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>Ensure the file permission have been set to the web server user. For example in Ubuntu this is www-data if you have configured a virtual host with a root directory of <code>/var/www/html</code> you would set the ownership like this.</span>
</div> </p>

<pre><code class="language-bash">sudo chown -R www-data:www-data /var/www/html
</code></pre>

<h5>Web server configuration</h5>

<p>A sample NGINX configuration is provided below, it assumes you have PHP 7.4 installed with the PHP FPM extension installed</p>

<pre><code class="language-bash">server {

listen 80;
server_name invoiceninja.test;
root /var/www/invoiceninja/public;
index index.php index.html index.htm;
client_max_body_size 20M;

gzip on;
gzip_types      application/javascript application/x-javascript text/javascript text/plain application/xml application/json;
gzip_proxied    no-cache no-store private expired auth;
gzip_min_length 1000;

location / {
    try_files $uri $uri/ =404;
}

if (!-e $request_filename) {
    rewrite ^(.+)$ /index.php?q= last;
}

location ~ \.php$ {
include snippets/fastcgi-php.conf;
fastcgi_pass unix:/run/php/php7.4-fpm.sock;
}

location ~ /\.ht {
    deny all;
}

}
</code></pre>

<p> <div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>Performance hint!</p>

<p>Enable gzip in your webserver configuration, this will dramatically improve the loading time of the application! Please see the above nginx configuration for a sample of how to load the components of the application with gzip.</span>
</div> </p>

<h5>Database server configuration</h5>

<p>Create a database on your MySQL compatible server and add a user that has full access to the database, database configuration is out of the scope of this article, more information can be found <a href="https://dev.mysql.com/doc/refman/8.0/en/creating-database.html">here</a></p>

<h5>Cron configuration</h5>

<p> <div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>Ensure you set the scheduler under the web server user i.e. <code>sudo -u www-data crontab -e</code></span>
</div> </p>

<p>Invoice Ninja relies heavily on the Laravel Scheduler, for this to operate it requires that a cron job to be configured, edit your crontab and enter the following record.</p>

<pre><code class="language-bash">* * * * * cd /path-to-your-project &amp;&amp; php artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1
</code></pre>

<p>Navigate your browser to your installation domain name address with /setup appended i.e. <b>www.invoiceninja.test/setup</b> from this page you will configure your database, mailserver and the primary account user, when completed, click Submit and the app will setup your application and redirect you to the login page</p>

<h3>Installation from git (Advanced)</h3>

<p>For power users installing the app from Github can be done with the following steps</p>

<pre><code class="language-bash">git clone https://github.com/invoiceninja/invoiceninja.git

git checkout v5-stable

composer install --no-dev

cp .env.example .env

php artisan key:generate

php artisan optimize
</code></pre>

<h5>Cron configuration</h5>

<p>Invoice Ninja relies heavily on the Laravel Scheduler, for this to operate it requires that a cron job to be configured, edit your crontab and enter the following record</p>

<p> <div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>Ensure you set the scheduler under the web server user i.e. <code>sudo -u www-data crontab -e</code></span>
</div> </p>

<pre><code class="language-bash">* * * * * cd /path-to-your-project &amp;&amp; php artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1
</code></pre>

<p>Configure your virtual host, create a database and point your browser to http://your.domain.com/setup and follow the bouncing ball!</p>

<h2>Shared Hosting</h2>

<h5>Server Requirements</h5>

<p>We have tested Invoice Ninja v5 on shared hosting and can confirm that it does work. There are several checks you will need to do prior to confirming whether your Shared Host has the correctly enabled modules. Invoice Ninja relies on:</p>

<ul>
<li>proc_open</li>
<li>exec</li>
<li>open_basedir</li>
</ul>

<p>Without these modules, you will not be able to run Invoice Ninja. We do include some preflight checks of these modules in the Setup workflow, but it is best to check with your host that they support these modules. Some hosts choose to disable these modules as they classify them as security risks.</p>

<h5>Database configuration</h5>

<p>&lt;</p>

<p>p>Create a MySQL compatible database in your shared host control panel along with a database user, record the database name, username and password as you'll need this later. Ensure your database user has full access to the database you've just created.</p>

<h5>Upload release asset</h5>

<p>Download the latest release from our <a href="https://github.com/invoiceninja/invoiceninja/releases">Releases</a> page. Note, you'll want to find the latest release which will contain 3 files, the one you need will be annotated as invoiceninja.zip.</p>

<p>Upload this file to your shared host, typically if your webhost uses the industry standard cPanel, you'll want to upload the <strong>invoiceninja.zip</strong> file to the <strong>public_html</strong> directory. Once the upload has completed, using the file manager unzip the file.</p>

<h5>Run setup</h5>

<p>Navigate to https://your.url.com/setup and fill in the form. The setup process will perform some pre flight checks and then attempt run the setup. If it has been successful you will be navigated to the Admin portal. If the setup fails for some reason, you'll be returned to the Setup screen with an error message, there may be additional errors reported in <strong>storage/logs/laravel.log</strong> that will provide more information where the setup has failed.</p>

<h5>Add the cron job</h5>

<p>Add the Laravel scheduler cron job, be sure to include the full path, for a cPanel host it should look like this:</p>

<pre><code class="language-bash">* * * * * /opt/alt/php73/usr/bin/php /home/&lt;myuseraccount&gt;/public_html/artisan schedule:run
</code></pre>

<h2>Installing Invoice Ninja (Docker)</h2>

<p>If you prefer to use Docker, we have a dedicated repository with detailed instructions on how to get started <a href="https://github.com/invoiceninja/dockerfiles">HERE</a></p>

<h2>Updating Invoice Ninja</h2>

<h3>Docker</h3>

<p>When we tag a new release, a new image is built. All that is required for docker users is to bring down the container, pull in the new image and then bring the container up again, these three commands are all that is needed.</p>

<pre><code class="language-bash">docker-compose down
docker-compose pull
docker-compose up
</code></pre>

<h3>Git users</h3>

<p>If you have installed Invoice Ninja using just git, then all that is required is to pull in the changes, run the migration, update the config cache and restart the queue. These commands are as follows:</p>

<pre><code class="language-bash">git pull
php artisan migrate
php artisan optimize
php artisan queue:restart
</code></pre>

<h3>Shared hosting / ZIP builds</h3>

<p>If you have installed the application using the precompiled .zip file, then the internal self updater should perform all the necessary tasks to bring your app up to the latest version. The only strict requirements are:</p>

<ul>
<li>The directory is owned recursively by the web user.</li>
<li>Git is available for execution.</li>
<li>The scheduler cron is running.</li>
</ul>

<h2>Migrating from v4</h2>

<p>Migration of your data from v4 to v5 is done via the Settings panel of v4. Navigate to Settings > Account Management and click on Start Migration</p>

<p>For the migration to be successful you will need to ensure the signup email address is the same between v4 and v5. It is not possible to cross migrate using different email address as part of your credentials</p>

<p>For further help with migrating please chat to us on our <a href="https://forum.invoiceninja.com">Forum</a> or our <a href="https://invoiceninja.slack.com">Slack Channel</a></p>

<p> <div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>After migration you will want to ensure all of your balances are correct to do this from the command line enter the following command</p>

<pre><code class="language-bash">php artisan ninja:check-data
</code></pre>

<p>The command will output errors and identify where balances are not matching.</span>
</div> </p>

<h2>Currency Conversion</h2>

<p>Invoice Ninja supports <a href="https://openexchangerates.org/">Open Exchange</a> for currency conversion.
Open Exchange currently provides a free tier which is suitable for daily updates of the exchange rates.
Simply insert a Open Exchange API key into your .env file to enable exchange rate updates:</p>

<pre><code class="language-bash">OPENEXCHANGE_APP_ID=your_open_exchange_api_key_here
</code></pre>

<p>Make sure to update your cache afterwards:</p>

<pre><code class="language-bash">php artisan optimize
</code></pre>

<h2>Phantom JS</h2>

<p>Using Phantom JS is an option <a href="https://phantomjscloud.com/">PhantomJS Cloud</a> to generate your PDFs. They currently provide 500 free PDFs per day which will suffice for most users.</p>

<p>Phantom JS can be toggled on and off by setting the PHANTOMJS_PDF_GENERATOR to either TRUE or FALSE. The following .env variables are available for configuring PhantomJS.</p>

<pre><code class="language-bash">PHANTOMJS_PDF_GENERATION=true
PHANTOMJS_KEY='a-demo-key-with-low-quota-per-ip-address'
PHANTOMJS_SECRET='your-secret-here'
</code></pre>

<p>Once this has been done you'll need to refresh the config cache:</p>

<pre><code class="language-bash">php artisan optimize
</code></pre>

<p>:::warning
For PhantomJS to work, your Invoice Ninja installation web address must be public; localhost installations or those on private networks won't be able to use PhantomJS Cloud.
:::</p>

<h2>Troubleshooting</h2>

<h3>General advice</h3>

<p>When facing errors, first set <code>APP_DEBUG=true</code> in <code>.env</code> and execute <code>php artisan optimize</code> to get more extensive debug information.</p>

<h3>Erroneous data format for unserializing 'Symfony\Component\Routing\CompiledRoute'</h3>

<p>The most common cause of this issue is running multiple version of PHP, if the caches are built with a different version of PHP you may see the above error as differing versions of PHP may not be interoperable on the same installation. Ensure you are running the same CLI and Web PHP version to prevent any errors/</p>

<h3>Unable to connect to database after installation</h3>

<p>You may need to restart the queue like this</p>

<pre><code class="language-bash">php artisan queue:restart
</code></pre>

<h3>Nginx: 413 â€“ Request Entity Too Large</h3>

<p>This error indicated that the client_max_body_size parameter in NGINX is too small, you will need to edit your nginx config and increase the size</p>

<pre><code class="language-bash">client_max_body_size 100M;
</code></pre>

<h3>Proxy configuration.</h3>

<p>For users that rely on configuring a reverse proxy, please consider this post on our forum which details steps which may assist in configuring a reverse proxy.</p>

<p><a href="https://forum.invoiceninja.com/t/selfhosting-setup-failing/5651/8">Reverse Proxy Invoice Ninja</a></p>

<h3>Problems with migration</h3>

<p>If you are experiencing issues with the migration not running as expected please run through the following checklist:</p>

<ul>
<li>Ensure directories are read/writable by the webuser (ie www-data)</li>
<li>Ensure the cron scheduler is running (and working) - You can verify it is working by inspecting the <code>jobs</code> table in the database, it should be empty</li>
<li>Inspect the log file /storage/logs/laravel.log for further information.</li>
<li>If you are still experiencing issues, turn on advanced logging by adding the following variable to your .env file. <code>EXPANDED_LOGGING=true</code> then optimize with <code>php artisan optimize</code> . Then attempt the migration again and afterwards inspect the log file in storage/logs/invoiceninja.log</li>
</ul>

            <a href="https://github.com/invoiceninja/invoiceninja.github.io/blob/master/source/docs/self-host.md"
               class="pt-4 border-t inline-flex items-center w-full block">
                <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="feather feather-github">
                    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                </svg>
                <span class="ml-2">Want to contribute? Edit this page on GitHub!</span>
            </a>
        </div> <!-- End of main content -->

        <div class="hidden md:block col-span-3 p-4">
            <div class="fixed" id="toc-container">
                <!-- Placeholder for table of contents -->
                <span class="text-sm uppercase block mb-3 text-ninja-blue">On this page</span>
            </div>
        </div>
    </div>
        <script src="/assets/build/js/main.js?id=f8ae428c8ff7fbb77216"></script>

    <script>
        document.getElementById('mobile-menu-toggle').addEventListener('click', () => {
            let mobileMenu = document.getElementById('mobile-menu');

            if (mobileMenu.classList.contains('hidden')) {
                return mobileMenu.classList.remove('hidden');
            }

            return mobileMenu.classList.add('hidden');
        });
    </script>
</body>

</html>
