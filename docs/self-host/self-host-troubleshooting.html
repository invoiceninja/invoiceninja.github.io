<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-self-host/self-host-troubleshooting" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Self Host Troubleshooting | Invoice Ninja</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://invoiceninja.github.io/docs/self-host/self-host-troubleshooting"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Self Host Troubleshooting | Invoice Ninja"><meta data-rh="true" name="description" content="General Troubleshooting Steps"><meta data-rh="true" property="og:description" content="General Troubleshooting Steps"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://invoiceninja.github.io/docs/self-host/self-host-troubleshooting"><link data-rh="true" rel="alternate" href="https://invoiceninja.github.io/docs/self-host/self-host-troubleshooting" hreflang="en"><link data-rh="true" rel="alternate" href="https://invoiceninja.github.io/docs/self-host/self-host-troubleshooting" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Self Host","item":"https://invoiceninja.github.io/docs/self-host/self-host-installation"},{"@type":"ListItem","position":2,"name":"Self Host Troubleshooting","item":"https://invoiceninja.github.io/docs/self-host/self-host-troubleshooting"}]}</script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300..700&amp;display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&amp;display=swap"><link rel="stylesheet" href="/assets/css/styles.b710f334.css">
<script src="/assets/js/runtime~main.04d917f2.js" defer="defer"></script>
<script src="/assets/js/main.cf8592e7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-rounded.png" alt="Invoice Ninja" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo-rounded.png" alt="Invoice Ninja" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/user-guide">User Guide</a><a class="navbar__item navbar__link" href="/docs/hosted/hosted-quickstart">Hosted</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/self-host/self-host-installation">Self Host</a><a class="navbar__item navbar__link" href="/docs/developer-guide">Developer Guide</a><a class="navbar__item navbar__link" href="/docs/api-reference/invoice-ninja-api-reference">API Reference</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/invoiceninja/invoiceninja" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://app.invoicing.co" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Open App<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/self-host/self-host-installation"><span title="Self Host" class="categoryLinkLabel_W154">Self Host</span></a><button aria-label="Collapse sidebar category &#x27;Self Host&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/self-host/getting-started"><span title="Getting Started" class="linkLabel_WmDU">Getting Started</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/self-host/self-host-installation"><span title="Self Host Installation" class="linkLabel_WmDU">Self Host Installation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/self-host/self-host-troubleshooting"><span title="Self Host Troubleshooting" class="linkLabel_WmDU">Self Host Troubleshooting</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/self-host/self-host-updating"><span title="Self Host Updating" class="linkLabel_WmDU">Self Host Updating</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/self-host/env-variables"><span title="Env Variables" class="linkLabel_WmDU">Env Variables</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/self-host/self-host-debug-mode"><span title="Self Host Debug Mode" class="linkLabel_WmDU">Self Host Debug Mode</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/self-host/self-host-white-labeling"><span title="Self Host White Labeling" class="linkLabel_WmDU">Self Host White Labeling</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_xLCN"><div class="docItemContainer_jfFK"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/self-host/self-host-installation"><span>Self Host</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Self Host Troubleshooting</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Self Host Troubleshooting</h1></header><div class="row"><div class="col col--12 markdown"><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="general-troubleshooting-steps">General Troubleshooting Steps<a href="#general-troubleshooting-steps" class="hash-link" aria-label="Direct link to General Troubleshooting Steps" title="Direct link to General Troubleshooting Steps" translate="no">​</a></h3>
<p>If you&#x27;re experiencing issues with your self-hosted Invoice Ninja instance, follow these general troubleshooting steps before diving into the specific sections:</p>
<ol>
<li class="">Verify that you meet the <a href="https://invoiceninja.github.io/en/self-host-installation/#server-requirements" target="_blank" rel="noopener noreferrer" class="">minimum system requirements</a>.</li>
<li class="">Consult the <a href="https://forum.invoiceninja.com/" target="_blank" rel="noopener noreferrer" class="">Invoice Ninja forum</a> for community support.</li>
<li class="">Examine the logs for error messages. You can find the logs in the <code>storage/logs</code> directory.</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="incomplete--unsuccessful-in-app-updates">Incomplete / Unsuccessful in app updates<a href="#incomplete--unsuccessful-in-app-updates" class="hash-link" aria-label="Direct link to Incomplete / Unsuccessful in app updates" title="Direct link to Incomplete / Unsuccessful in app updates" translate="no">​</a></h2>
<p>If you application failed to update to the latest installation there are several reasons why this may happen:</p>
<ol>
<li class="">Timeout: Your system timed out during the upgrade process</li>
<li class="">System requirements may have changed. Prior to upgrading if the version is changing its minor release variable (v5.XXX.1) then you should check the system requirements / release notes to ensure your system is prepared prior to the upgrade. You may need to add a PHP extension or there may be a change to the minimum PHP version required. Patch versions (v5.10.XXX) do not require have any changes to system requirements.</li>
</ol>
<p>In order to recover from a failed/incomplete update, you may attempt to run the self update again within the application else you will want to follow these steps:</p>
<ol>
<li class="">Navigate to the releases page on <a href="https://github.com/invoiceninja/invoiceninja/releases" target="_blank" rel="noopener noreferrer" class="">Github</a></li>
<li class="">Download the file labelled invoiceninja.tar</li>
<li class="">Unpack this file and overwrite your existing file structure</li>
<li class="">Then either of these two steps:
a) From the command line at the project root:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">composer</span><span class="token plain"> i </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> --no-dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">php artisan migrate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">php artisan optimize:clear</span><br></span></code></pre></div></div>
<p>b) From a browser window</p>
<p><a href="https://yourdomain.com/update?secret=UPDATE_SECRET_VALUE_FROM_ENV_FILE" target="_blank" rel="noopener noreferrer" class="">https://yourdomain.com/update?secret=UPDATE_SECRET_VALUE_FROM_ENV_FILE</a></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="error-target-class-view-does-not-exist">ERROR: Target class [view] does not exist<a href="#error-target-class-view-does-not-exist" class="hash-link" aria-label="Direct link to ERROR: Target class [view] does not exist" title="Direct link to ERROR: Target class [view] does not exist" translate="no">​</a></h3>
<p>This error can usually be resolved by deleting the contents of the bootstrap/cache folder.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="downgrading-to-a-specific-version">Downgrading to a Specific Version<a href="#downgrading-to-a-specific-version" class="hash-link" aria-label="Direct link to Downgrading to a Specific Version" title="Direct link to Downgrading to a Specific Version" translate="no">​</a></h2>
<p>If you need to downgrade your Invoice Ninja installation to a specific version, follow the steps below. Ensure you have sufficient backups and preparation to avoid data loss or service interruption.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-1-backup-your-installation">Step 1: Backup Your Installation<a href="#step-1-backup-your-installation" class="hash-link" aria-label="Direct link to Step 1: Backup Your Installation" title="Direct link to Step 1: Backup Your Installation" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="11-backup-your-env-file">1.1 Backup Your <code>.env</code> File<a href="#11-backup-your-env-file" class="hash-link" aria-label="Direct link to 11-backup-your-env-file" title="Direct link to 11-backup-your-env-file" translate="no">​</a></h4>
<p>The <code>.env</code> file contains critical configuration for your installation. Make a copy of it:</p>
<p>NB! change directory to your Invoice Ninja root folder</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> /var/www/invoiceninja</span><br></span></code></pre></div></div>
<p>NB! Make sure to replace {youraccount} with your user folder</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> .env /home/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">youraccount</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/invoice-ninja-env-backup-YYYY-MM-DD</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="12-backup-your-database">1.2 Backup Your Database<a href="#12-backup-your-database" class="hash-link" aria-label="Direct link to 1.2 Backup Your Database" title="Direct link to 1.2 Backup Your Database" translate="no">​</a></h4>
<p>Use your preferred database management tool to create a backup. Many tutorials are available online based on your specific database setup (e.g., MySQL, PostgreSQL).</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="13-backup-your-root-folder">1.3 Backup Your Root Folder<a href="#13-backup-your-root-folder" class="hash-link" aria-label="Direct link to 1.3 Backup Your Root Folder" title="Direct link to 1.3 Backup Your Root Folder" translate="no">​</a></h4>
<p>For complete recovery, back up your Invoice Ninja root folder:</p>
<p>NB! Make sure to replace {youraccount} with your user folder</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-pzcf</span><span class="token plain"> /home/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">youraccount</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/invoiceninja-YYYY-MM-DD.tar.gz /var/www/invoiceninja</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-2-download-the-target-version">Step 2: Download the Target Version<a href="#step-2-download-the-target-version" class="hash-link" aria-label="Direct link to Step 2: Download the Target Version" title="Direct link to Step 2: Download the Target Version" translate="no">​</a></h3>
<p>Navigate to the <a href="https://github.com/invoiceninja/invoiceninja/releases" target="_blank" rel="noopener noreferrer" class="">Invoice Ninja Releases Page</a> and identify the version you wish to downgrade to. Download the <code>invoiceninja.tar</code> file for that version into the root of your Invoice Ninja folder:</p>
<p>NB! change directory to your Invoice Ninja root folder</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> /var/www/invoiceninja </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">``</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">bash</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa"></span><span class="token variable" style="color:#36acaa">`</span><span class="token plain">``bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://github.com/invoiceninja/invoiceninja/releases/download/v5.XX.XX/invoiceninja.tar</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-3-extract-the-files">Step 3: Extract the Files<a href="#step-3-extract-the-files" class="hash-link" aria-label="Direct link to Step 3: Extract the Files" title="Direct link to Step 3: Extract the Files" translate="no">​</a></h3>
<p>Extract the downloaded archive, ensuring it overwrites the existing files:</p>
<p>NB! Make sure to replace www-data with your web user</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> www-data </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-xf</span><span class="token plain"> invoiceninja.tar </span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-4-clear-caches">Step 4: Clear Caches<a href="#step-4-clear-caches" class="hash-link" aria-label="Direct link to Step 4: Clear Caches" title="Direct link to Step 4: Clear Caches" translate="no">​</a></h3>
<p>Run the following commands to clear caches and optimize the application:</p>
<p>NB! Make sure to replace www-data with your web user</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> www-data php artisan cache:clear</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> www-data php artisan view:clear</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> www-data php artisan config:clear</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> www-data php artisan optimize:clear</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> www-data </span><span class="token function" style="color:#d73a49">composer</span><span class="token plain"> dump-autoload</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-5-clean-up">Step 5: Clean Up<a href="#step-5-clean-up" class="hash-link" aria-label="Direct link to Step 5: Clean Up" title="Direct link to Step 5: Clean Up" translate="no">​</a></h3>
<p>Delete the downloaded <code>invoiceninja.tar</code> file to keep your installation tidy:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> /var/www/invoiceninja</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">``</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">bash</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa"></span><span class="token variable" style="color:#36acaa">`</span><span class="token plain">``bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> invoiceninja.tar</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-6-verify-the-installation">Step 6: Verify the Installation<a href="#step-6-verify-the-installation" class="hash-link" aria-label="Direct link to Step 6: Verify the Installation" title="Direct link to Step 6: Verify the Installation" translate="no">​</a></h3>
<p>Access your Invoice Ninja installation through the browser to ensure it is functioning correctly. If errors occur, follow these steps:</p>
<ol>
<li class="">
<p>Delete the Invoice Ninja folder:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-rf</span><span class="token plain"> /var/www/invoiceninja</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>Restore from your backups:</p>
<ul>
<li class="">Extract your root folder backup.</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-zxf</span><span class="token plain"> /home/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">youraccount</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/invoiceninja-YYYY-MM-DD.tar.gz </span><span class="token parameter variable" style="color:#36acaa">-C</span><span class="token plain"> /</span><br></span></code></pre></div></div>
<ul>
<li class="">Restore your database backup.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes" translate="no">​</a></h3>
<ul>
<li class="">Ensure that the target version’s system requirements match your server’s configuration.</li>
<li class="">If you encounter permission issues, verify that the <code>www-data</code> user (or equivalent web server user) has the correct access to your installation directory.</li>
<li class="">For additional help, consult the community forums.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sqlstate42s22-column-not-found">SQLSTATE[42S22]: Column not found:<a href="#sqlstate42s22-column-not-found" class="hash-link" aria-label="Direct link to SQLSTATE[42S22]: Column not found:" title="Direct link to SQLSTATE[42S22]: Column not found:" translate="no">​</a></h2>
<p>If you see in your error logs a message such as &quot;Column not found&quot; this indicates that your migrations are not up to date and need to be run there are two ways to force the migrations to run:</p>
<ol>
<li class=""><a href="http://yourdomain.com/update?secret=insert_your_UPDATE_SECRET_variable_here" target="_blank" rel="noopener noreferrer" class="">http://yourdomain.com/update?secret=insert_your_UPDATE_SECRET_variable_here</a></li>
<li class="">From the project root run the following command:</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">php artisan migrate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="cron-not-running--queue-not-running">Cron not running / Queue not running<a href="#cron-not-running--queue-not-running" class="hash-link" aria-label="Direct link to Cron not running / Queue not running" title="Direct link to Cron not running / Queue not running" translate="no">​</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>It can take up to an hour for the red warning triangle to disappear after correctly configuring your Cron.</p><p>After making any changes to your cron setup you&#x27;ll want to force a recheck of the cron setting. To do this navigate to <a href="http://url/update?secret=" target="_blank" rel="noopener noreferrer" class="">http://url/update?secret=</a></p></div></div>
<p>If you are faced with your recurring invoices not firing, or your reminders not sending, then most likely your cron job isn&#x27;t working. The first thing is to make sure you have your cron jobs configured correctly by following the guide <a href="https://invoiceninja.github.io/en/self-host-installation/#cron-configuration-1" target="_blank" rel="noopener noreferrer" class="">here</a></p>
<p>If you are using shared hosting, then will need to add an additional parameter to the cron command which looks like this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> /path/to/root/folder </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> /usr/bin/php </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">register_argc_argv</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">On artisan schedule:run </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /dev/null </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><br></span></code></pre></div></div>
<p>Please note that on some systems the php location may be different, so confirm with your hosting provider which path to PHP you need to use.</p>
<p>To test your changes, navigate your browser to the update URL which is in the following format:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">https://yourdomain.com/update?secret</span><span class="token operator" style="color:#393A34">=</span><br></span></code></pre></div></div>
<p>The secret variable is located in your .env file until the key <code>UPDATE_SECRET</code> , this will force a recheck and if the cron is working the red error triangle will disappear.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="pdfs-dont-appear-to-be-updating">PDFs don&#x27;t appear to be updating<a href="#pdfs-dont-appear-to-be-updating" class="hash-link" aria-label="Direct link to PDFs don&#x27;t appear to be updating" title="Direct link to PDFs don&#x27;t appear to be updating" translate="no">​</a></h2>
<p>If you are using Cloudflare, then most likely Cloudflare could be caching your static data. To force cache busting, edit your nginx.conf file and add in the following snippet</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">location ~* </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">.pdf$ </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add_header Cache-Control no-store</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>On Apache based servers, open the <a href="https://github.com/invoiceninja/invoiceninja/blob/master/public/.htaccess#L25" target="_blank" rel="noopener noreferrer" class="">/public/.htaccess</a> file and update the mod_headers block</p>
<div class="language-apacheconf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apacheconf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;IfModule mod_headers.c&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Blocks Search Engine Indexing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Header set X-Robots-Tag &quot;noindex, nofollow&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Prevents PDF File Caching</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;FilesMatch &quot;.pdf$&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Header set Cache-Control no-store</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/FilesMatch&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/IfModule&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="email-not-sending">Email not sending<a href="#email-not-sending" class="hash-link" aria-label="Direct link to Email not sending" title="Direct link to Email not sending" translate="no">​</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>If you are using Gmail - Use an <a href="https://support.google.com/accounts/answer/185833?hl=en" target="_blank" rel="noopener noreferrer" class="">app specific password</a> or ensure you have less secure apps turned on.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>If you are using Office 365 - You may need to <a href="https://docs.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/authenticated-client-smtp-submission" target="_blank" rel="noopener noreferrer" class="">enable SMTP AUTH</a>.</p></div></div>
<p>If you are using gmail smtp relay, then a additional .env variable is required.</p>
<p>For Gmail SMTP Relay also ensure you have configure this service in Google by using the following steps:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Go to </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Apps </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Google Workspace </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Gmail </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Routing</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Next to SMTP relay service, click Configure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set up the SMTP relay </span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> by following the steps </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SMTP relay: Route outgoing non-Gmail messages through Google</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Then, </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> your </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> file, use the following:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Gmail SMTP Relay requires a proper EHLO </span><span class="token function" style="color:#d73a49">hostname</span><span class="token plain"> domain to be sent during the SMTP handshake: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> doesn’t </span><span class="token function" style="color:#d73a49">cut</span><span class="token plain"> it anymore. For that, Laravel has to check </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> a </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> domain variable and send it along with the handshake request.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MAIL_EHLO_DOMAIN</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;server.domain.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MAIL_MAILER</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">smtp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MAIL_HOST</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">smtp-relay.gmail.com </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MAIL_PORT</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">587</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MAIL_USERNAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">xxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MAIL_PASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">xxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MAIL_ENCRYPTION</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MAIL_FROM_ADDRESS</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">xxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MAIL_FROM_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">xxxx</span><br></span></code></pre></div></div>
<p>You will also want to make sure you do not have any firewall rules which may be blocking access to the Google servers, just in case, ensure the following IP addresses are whitelisted:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">142.251</span><span class="token plain">.163.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">172.253</span><span class="token plain">.63.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">172.253</span><span class="token plain">.118.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">74.125</span><span class="token plain">.24.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">142.250</span><span class="token plain">.114.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">142.250</span><span class="token plain">.4.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">142.251</span><span class="token plain">.12.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">172.217</span><span class="token plain">.194.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">142.250</span><span class="token plain">.31.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">142.251</span><span class="token plain">.167.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">172.253</span><span class="token plain">.115.28</span><br></span></code></pre></div></div>
<p>For more detailed information on Gmail Relay, see this post of our forum by community member charles</p>
<p><a href="https://forum.invoiceninja.com/t/emails-not-sending-yet-another-thread-v5-5-55/12401/9" target="_blank" rel="noopener noreferrer" class="">https://forum.invoiceninja.com/t/emails-not-sending-yet-another-thread-v5-5-55/12401/9</a></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="mail-mailer-configuration">Mail Mailer configuration<a href="#mail-mailer-configuration" class="hash-link" aria-label="Direct link to Mail Mailer configuration" title="Direct link to Mail Mailer configuration" translate="no">​</a></h3>
<p>The <code>MAIL_MAILER</code> field defines which email driver you wish to use, this could be postmark, mailgun, smtp, log - anything that Laravel 9 supports natively is supported in this app.</p>
<p>If the mail config is correct, the next place to check would be to check the error logs for any errors that are being thrown, the error log is found in <code>storage/logs/laravel.log</code></p>
<p>The final source of information in diagnosing mail troubles is to inspect the <code>System Logs</code> tab in the dashboard of the application, in here we log any messages from the mail server itself which may be instructive as to the cause of your issues.</p>
<p>If you are using the Queue system ie. QUEUE_CONNECTION=database then you may also want to check the <code>jobs</code> table in the database, there should be <em>no</em> records in that table... If there are records in the table it means that your queue is not running and therefore no mail jobs are being processed.</p>
<p>It&#x27;s possible the emails are sent but are blocked for DNS, SPF, DKIM or other reasons. In these cases emailing a test invoice to <a href="https://mail-tester.com" target="_blank" rel="noopener noreferrer" class="">mail-tester.com</a> can help debug certain problems.</p>
<p>Also, if you see in /storage/logs/invoiceninja.log this line <code>error failed with stream_socket_enable_crypto(): SSL operation failed with code 1. OpenSSL Error messages: error:14090086:SSL routines:ssl3_get_server_certificate:certificate verify failed</code> then try running <code>yum update</code> on your webserver, it should fix the ca-certificates problem.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="godaddy-email-sending-woes">GoDaddy email sending woes<a href="#godaddy-email-sending-woes" class="hash-link" aria-label="Direct link to GoDaddy email sending woes" title="Direct link to GoDaddy email sending woes" translate="no">​</a></h2>
<p>GoDaddy does not allowing sending via third party <a href="https://my.godaddy.com/help/send-form-mail-using-an-smtp-relay-server-953" target="_blank" rel="noopener noreferrer" class="">SMTP</a> servers. They require sending all email via their own servers. If you need to use GoDaddy, we suggest using a transactional email service such as PostMark to bypass.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="pdf-conversion-issues">PDF conversion issues.<a href="#pdf-conversion-issues" class="hash-link" aria-label="Direct link to PDF conversion issues." title="Direct link to PDF conversion issues." translate="no">​</a></h2>
<p>We strongly recommend using the built in <a href="https://github.com/beganovich/snappdf" target="_blank" rel="noopener noreferrer" class="">snappdf</a> package which is a highly performant PDF generator based on the headless chrome/chromium binary. This package is perfect for users that have root access to their server and are able to install the required dependencies if needed.</p>
<p>To configure SnapPDF use the following .env vars</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">PDF_GENERATOR</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">snappdf</span><br></span></code></pre></div></div>
<p>As of version 5.5.12 we no longer prebundle snappdf in the release files, so if you have a new installation you&#x27;ll need to manually invoke the download of the chromium binary, from the root of the project run the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vendor/bin/snappdf download</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>If PDF generation is broken after an upgrade, you may need to run the above command again, with the force option.</p><p>chmod +x vendor/bin/snappdf
sudo -u www-data vendor/bin/snappdf download --force</p></div></div>
<p>Snappdf is also the default PDF engine in our <a href="https://github.com/invoiceninja/dockerfiles" target="_blank" rel="noopener noreferrer" class="">Docker</a> image, so if you prefer a very simple installation please consider our Docker setup as it is very fast to get going!</p>
<p>You can use this command to test Snappdf:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./vendor/bin/snappdf convert </span><span class="token parameter variable" style="color:#36acaa">--html</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;h1&gt;Hello world&lt;/h1&gt;&quot;</span><span class="token plain"> test.pdf</span><br></span></code></pre></div></div>
<p>A complete list of required dependencies is available <a href="https://github.com/beganovich/snappdf#headless-chrome-doesnt-launch-on-unix" target="_blank" rel="noopener noreferrer" class="">here</a>.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>In a recent update, chromium/chrome uses the crashpad handler to write to the users home directory .local .config</p><p>When running snappdf as a user such as www-data this users directory - typically /var/www - may not be writable OR the www-data user may not be able to create the .local / .config directories required to support SnapPDF / Chrome.</p><p>It is advised to chown the home dir of the www user to ensure that crashpad can write to this temp directory and allow PDFs to be generated.</p><p>sudo chown -R www-data:www-data /var/www/.local
sudo chown -R www-data:www-data /var/www/.config</p></div></div>
<p>If you are on shared hosting, snappdf probably will be impossible for you to use as you do not have access to the subsystem to install the required packages. Instead, you will need to use a hosted PDF service, the two that Invoice Ninja v5 supports is <a href="https://phantomjscloud.com/" target="_blank" rel="noopener noreferrer" class="">PhantomJS Cloud</a> and our own hosted PDF generator which can use for <em>free</em> to generate <em>unlimited</em> PDFs.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="phantom-js">Phantom JS<a href="#phantom-js" class="hash-link" aria-label="Direct link to Phantom JS" title="Direct link to Phantom JS" translate="no">​</a></h3>
<p>Phantom JS Cloud is the default PDF engine <a href="https://phantomjscloud.com/" target="_blank" rel="noopener noreferrer" class="">PhantomJS Cloud</a> to generate your PDFs, the default API key that comes with a clean installation will no reliably generate PDFs, to ensure you can generate PDFs you should register for an API key on the phantomjscloud website and use this key in the .env file.</p>
<p>Phantom JS can be toggled on and off by setting the PHANTOMJS_PDF_GENERATOR to either TRUE or FALSE. The following .env variables are available for configuring PhantomJS.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">PDF_GENERATOR</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">phantom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PHANTOMJS_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;a-demo-key-with-low-quota-per-ip-address&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PHANTOMJS_SECRET</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;your-secret-here&#x27;</span><br></span></code></pre></div></div>
<p>The <code>PHANTOMJS_SECRET</code> can be any random value, it&#x27;s used to bypass the client portal password.</p>
<p>If you experience errors with PDF generation, such as <code>500 Server error</code> or <code>Failed to load PDF document</code> or a continuous loading bar, you must get a PhantomJS key <a href="https://dashboard.phantomjscloud.com/dash.html#/signup" target="_blank" rel="noopener noreferrer" class="">here</a>, Replace it with the prefilled key <code>a-demo-key-with-low-quota-per-ip-address</code>.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>For PhantomJS to work, your Invoice Ninja installation web address must be public; localhost installations or those on private networks won&#x27;t be able to use PhantomJS Cloud.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="hosted-invoice-ninja-pdf-generation">Hosted Invoice Ninja PDF generation<a href="#hosted-invoice-ninja-pdf-generation" class="hash-link" aria-label="Direct link to Hosted Invoice Ninja PDF generation" title="Direct link to Hosted Invoice Ninja PDF generation" translate="no">​</a></h3>
<p>The default PDF generated as of version 5.5.12 is our hosted platform PDF conversion system. The hosted ninja PDF generator is an offsite PDF generator hosted by Invoice Ninja, which operate similar to PhantomJS. It is important to note that we do not store any information with this service, we simply convert the HTML your system sends into a PDF file which is return on the fly.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">PDF_GENERATOR</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">hosted_ninja</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="platform-specific-issues">Platform specific issues<a href="#platform-specific-issues" class="hash-link" aria-label="Direct link to Platform specific issues" title="Direct link to Platform specific issues" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="general-advice">General advice<a href="#general-advice" class="hash-link" aria-label="Direct link to General advice" title="Direct link to General advice" translate="no">​</a></h3>
<p>When facing errors, first set <code>APP_DEBUG=true</code> in <code>.env</code></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="process-has-been-signaled-with-signal-5">Process has been signaled with signal &quot;5&quot;<a href="#process-has-been-signaled-with-signal-5" class="hash-link" aria-label="Direct link to Process has been signaled with signal &quot;5&quot;" title="Direct link to Process has been signaled with signal &quot;5&quot;" translate="no">​</a></h3>
<p>This error message is observed when the queue attempts to perform a action where the queue user does not have the correct permissions. You may see this error if you run command line arguments as a user other than the web user.</p>
<p>This is most commonly see in Invoice Ninja where snappdf has been downloaded from the command line as a regular user, the permissions on the binary may prevent the webuser from executing the chrome binary when generating the PDF.</p>
<p>Always ensure that tasks run on the command line are executed by the web user, on Ubuntu this is typically www-data</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>In a recent update, chromium/chrome uses the crashpad handler to write to the users home directory .local .config</p><p>When running snappdf as a user such as www-data this users directory - typically /var/www - may not be writable OR the www-data user may not be able to create the .local / .config directories required to support SnapPDF / Chrome.</p><p>It is advised to chown the home dir of the www user to ensure that crashpad can write to this temp directory and allow PDFs to be generated.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="erroneous-data-format-for-unserializing-symfonycomponentroutingcompiledroute">Erroneous data format for unserializing &#x27;Symfony\Component\Routing\CompiledRoute&#x27;<a href="#erroneous-data-format-for-unserializing-symfonycomponentroutingcompiledroute" class="hash-link" aria-label="Direct link to Erroneous data format for unserializing &#x27;Symfony\Component\Routing\CompiledRoute&#x27;" title="Direct link to Erroneous data format for unserializing &#x27;Symfony\Component\Routing\CompiledRoute&#x27;" translate="no">​</a></h3>
<p>The most common cause of this issue is running multiple version of PHP, if the caches are built with a different version of PHP you may see the above error as differing versions of PHP may not be interoperable on the same installation. Ensure you are running the same CLI and Web PHP version to prevent any errors/</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="unable-to-connect-to-database-after-installation">Unable to connect to database after installation<a href="#unable-to-connect-to-database-after-installation" class="hash-link" aria-label="Direct link to Unable to connect to database after installation" title="Direct link to Unable to connect to database after installation" translate="no">​</a></h3>
<p>You may need to restart the queue like this</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">php artisan queue:restart</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="nginx-413--request-entity-too-large">Nginx: 413 – Request Entity Too Large<a href="#nginx-413--request-entity-too-large" class="hash-link" aria-label="Direct link to Nginx: 413 – Request Entity Too Large" title="Direct link to Nginx: 413 – Request Entity Too Large" translate="no">​</a></h3>
<p>This error indicated that the client_max_body_size parameter in NGINX is too small, you will need to edit your nginx config and increase the size</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">client_max_body_size 100M</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="proxy-configuration">Proxy configuration.<a href="#proxy-configuration" class="hash-link" aria-label="Direct link to Proxy configuration." title="Direct link to Proxy configuration." translate="no">​</a></h3>
<p>For users that rely on configuring a reverse proxy, please consider this post on our forum which details steps which may assist in configuring a reverse proxy.</p>
<p><a href="https://forum.invoiceninja.com/t/selfhosting-setup-failing/5651/8" target="_blank" rel="noopener noreferrer" class="">Reverse Proxy Invoice Ninja</a></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="problems-with-migration">Problems with migration<a href="#problems-with-migration" class="hash-link" aria-label="Direct link to Problems with migration" title="Direct link to Problems with migration" translate="no">​</a></h3>
<p>If you are experiencing issues with the migration not running as expected please run through the following checklist:</p>
<ul>
<li class="">Ensure directories are read/writable by the webuser (ie www-data)</li>
<li class="">Ensure the cron scheduler is running (and working) - You can verify it is working by inspecting the <code>jobs</code> table in the database, it should be empty</li>
<li class="">Inspect the log file /storage/logs/laravel.log for further information.</li>
<li class="">If you are still experiencing issues, turn on advanced logging by adding the following variable to your .env file. <code>EXPANDED_LOGGING=true</code> Then attempt the migration again and afterwards inspect the log file in storage/logs/invoiceninja.log</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="libatkso-not-loading-for-google">libatk.so not loading for Google<a href="#libatkso-not-loading-for-google" class="hash-link" aria-label="Direct link to libatk.so not loading for Google" title="Direct link to libatk.so not loading for Google" translate="no">​</a></h3>
<p>Pdf generation will not working using the inbuilt PDF engine without some subsystem dependencies, please consult this resource for the list of necessary libraries for each supported platform <a href="https://github.com/beganovich/snappdf#headless-chrome-doesnt-launch-on-unix" target="_blank" rel="noopener noreferrer" class="">Snappdf required libraries</a></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="webcron-configuration">WebCron configuration<a href="#webcron-configuration" class="hash-link" aria-label="Direct link to WebCron configuration" title="Direct link to WebCron configuration" translate="no">​</a></h3>
<p>Some systems do not allow cron configurations, one work around is to use a web cron service which can hit a defined endpoint which executes the scheduler via a GET HTTP request. Invoice Ninja has implemented a small service to allow a webcron service to hit the end point:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">https://domain.com/webcron?secret</span><span class="token operator" style="color:#393A34">=</span><br></span></code></pre></div></div>
<p>To configure the service, you need to add a .env variable</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">WEBCRON_SECRET</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">password</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-in-a-subdirectory">Installing in a subdirectory.<a href="#installing-in-a-subdirectory" class="hash-link" aria-label="Direct link to Installing in a subdirectory." title="Direct link to Installing in a subdirectory." translate="no">​</a></h3>
<p>It is possible to install Invoice Ninja in a subdirectory outside the doc root, to enable this you will need to update the .htaccess file (only if you are using the Apache webserver),</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RewriteRule </span><span class="token operator" style="color:#393A34">^</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">$ </span><span class="token keyword" style="color:#00009f">public</span><span class="token operator" style="color:#393A34">/</span><span class="token variable" style="color:#36acaa">$1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">L</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>should be updated to</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RewriteRule </span><span class="token operator" style="color:#393A34">^</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">$ subdirectoryname</span><span class="token operator" style="color:#393A34">/</span><span class="token keyword" style="color:#00009f">public</span><span class="token operator" style="color:#393A34">/</span><span class="token variable" style="color:#36acaa">$1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">L</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="endless-setup-loop">Endless setup loop<a href="#endless-setup-loop" class="hash-link" aria-label="Direct link to Endless setup loop" title="Direct link to Endless setup loop" translate="no">​</a></h3>
<p>If you are finding that all your pre setup checks are passing however you keep falling back to the setup screen, this could indicate that you are missing the <code>mysql-client</code> library which is needed to perform the initial migration. If you are unable to install this for some reason (ie. XAMPP) then you&#x27;ll need to run the migrations manually by entering the following at the command prompt</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">php artisan migrate:fresh </span><span class="token parameter variable" style="color:#36acaa">--seed</span><span class="token plain"> </span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="flock-expects-parameter-1-to-be-resource-bool-given">flock() expects parameter 1 to be resource, bool given<a href="#flock-expects-parameter-1-to-be-resource-bool-given" class="hash-link" aria-label="Direct link to flock() expects parameter 1 to be resource, bool given" title="Direct link to flock() expects parameter 1 to be resource, bool given" translate="no">​</a></h3>
<p>This error is thrown from deep within PHP and indicates a permissions issue - most likely the public/storage and/or storage/ directory is not writable by the web user, depending on your platform, you&#x27;ll need to run something like:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-R</span><span class="token plain"> www-data:www-data public/storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> ./ </span><span class="token parameter variable" style="color:#36acaa">-type</span><span class="token plain"> d </span><span class="token parameter variable" style="color:#36acaa">-exec</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">755</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>and/or</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-R</span><span class="token plain"> www-data:www-data storage/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> ./ </span><span class="token parameter variable" style="color:#36acaa">-type</span><span class="token plain"> d </span><span class="token parameter variable" style="color:#36acaa">-exec</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">755</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="unresponsive-ui">Unresponsive UI<a href="#unresponsive-ui" class="hash-link" aria-label="Direct link to Unresponsive UI" title="Direct link to Unresponsive UI" translate="no">​</a></h3>
<p>If for some reason the UI becomes unresponsive, you may need to flush some subsystem configuration and rebuild. It is possible to do this by navigating to the <code>/update?secret=</code>  route, ie. <a href="https://invoiceninja.test/update?secret=" target="_blank" rel="noopener noreferrer" class="">https://invoiceninja.test/update?secret=</a> This will perform a number of system clean ups and may resolve issues resulting from an incomplete upgrade. To protect this route, you are advised to add a .env pararameter <code>UPDATE_SECRET=a_secret_passcode</code> this will restrict the route to users with the UPDATE_SECRET passcode.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="logo-not-appearing-in-the-pdf">Logo not appearing in the PDF<a href="#logo-not-appearing-in-the-pdf" class="hash-link" aria-label="Direct link to Logo not appearing in the PDF" title="Direct link to Logo not appearing in the PDF" translate="no">​</a></h3>
<p>It may help to add <code>LOCAL_DOWNLOAD=true</code> to the .env file, this will embed the image in the PDF rather than request it over the network.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="communication-link-failure-1153-got-a-packet-bigger-than-max_allowed_packet">Communication link failure: 1153 Got a packet bigger than &#x27;max_allowed_packet&#x27;<a href="#communication-link-failure-1153-got-a-packet-bigger-than-max_allowed_packet" class="hash-link" aria-label="Direct link to Communication link failure: 1153 Got a packet bigger than &#x27;max_allowed_packet&#x27;" title="Direct link to Communication link failure: 1153 Got a packet bigger than &#x27;max_allowed_packet&#x27;" translate="no">​</a></h3>
<p>If you are using the database for your queue&#x27;s then sometimes you may see an error from MySQL</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">1153</span><span class="token plain"> Got a packet bigger than </span><span class="token string" style="color:#e3116c">&#x27;max_allowed_packet&#x27;</span><br></span></code></pre></div></div>
<p>This indicates the insertion payload is bigger than MySQL is configured to handle! To work around this, you will need to increate the mysql variable</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">max_allowed_packet</span><br></span></code></pre></div></div>
<p>To a larger value. Sometimes a value of 1024M is required.</p>
<p>It may also be wise to increase the variable</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">max_connections</span><br></span></code></pre></div></div>
<p>as similar errors can be reported from the DB.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="500-error-when-editing-pdf-templates">500 error when editing PDF templates<a href="#500-error-when-editing-pdf-templates" class="hash-link" aria-label="Direct link to 500 error when editing PDF templates" title="Direct link to 500 error when editing PDF templates" translate="no">​</a></h3>
<p>There was a <a href="https://forum.invoiceninja.com/t/500-error-when-editing-pdf-invoice-templates-potential-fix/7067" target="_blank" rel="noopener noreferrer" class="">report</a>
from the user who solved 500 error on their server by disabling ModSecurity.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="500-error-when-trying-to-login-or-edit-company-details">500 error when trying to login or edit company details<a href="#500-error-when-trying-to-login-or-edit-company-details" class="hash-link" aria-label="Direct link to 500 error when trying to login or edit company details" title="Direct link to 500 error when trying to login or edit company details" translate="no">​</a></h3>
<p>Try these steps to fix the 500 server error when trying to login or editing company details</p>
<ol>
<li class="">Download the latest update from the <a href="https://github.com/invoiceninja/invoiceninja/releases" target="_blank" rel="noopener noreferrer" class="">github releases</a> (not <code>invoiceninja.tar</code> but <code>Source code (zip)</code>)</li>
<li class="">Upload the zip, extract the files and override them in your /public_html/ (Be careful to not override the .env file or all will be gone)</li>
<li class="">Login to your root and make sure first of all that all files are owned recursively by the user, ex. <code>sudo chown -R www-data:www-data dir/</code></li>
<li class="">Run this command <code>cd /home/domain.com/public_html/invoiceninja/ &amp;&amp; php artisan migrate</code> or simply <code>php artisan migrate</code> whatever works for you, select &quot;YES&quot;</li>
<li class="">If an error occurs like this one</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PHP Fatal error:  Cannot </span><span class="token builtin class-name">declare</span><span class="token plain"> class UpdateDesigns, because the name is already </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> use </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> /home/domain.com/public_html/invoiceninja/database/migrations/2021_09_16_115919_update_designs.php on line </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">In 2021_09_16_115919_update_designs.php line n/a: Cannot </span><span class="token builtin class-name">declare</span><span class="token plain"> class UpdateDesigns, because the name is already </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> use</span><br></span></code></pre></div></div>
<p>Delete that file and retry the command until it works and runs properly.</p>
<ol start="6">
<li class="">Go to <a href="https://domain.com/update?secret=x" target="_blank" rel="noopener noreferrer" class="">https://domain.com/update?secret=x</a> to be sure the update worked, it should load the login screen and work, you should also be able to edit the company details again.</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="unresolvable-dependency-resolving-parameter-0--array-options--in-class-apputilscssinlinerplugin">Unresolvable dependency resolving [Parameter #0 [ array $options ]] in class App\Utils\CssInlinerPlugin<a href="#unresolvable-dependency-resolving-parameter-0--array-options--in-class-apputilscssinlinerplugin" class="hash-link" aria-label="Direct link to Unresolvable dependency resolving [Parameter #0 [ array $options ]] in class App\Utils\CssInlinerPlugin" title="Direct link to Unresolvable dependency resolving [Parameter #0 [ array $options ]] in class App\Utils\CssInlinerPlugin" translate="no">​</a></h3>
<p>When changes are made to the container this can causes the cache to become stale in the application preventing it from booting.</p>
<p>The solution is to clear the contents of the folder <code>bootstrap/cache</code>, by either manually deleting files or by running <code>/update?secret=</code> which will also delete the contents of this directory.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="uncaught-errorexception-collectionoffsetexistskey">Uncaught ErrorException Collection::offsetExists($key)<a href="#uncaught-errorexception-collectionoffsetexistskey" class="hash-link" aria-label="Direct link to Uncaught ErrorException Collection::offsetExists($key)" title="Direct link to Uncaught ErrorException Collection::offsetExists($key)" translate="no">​</a></h3>
<p>This error is observed when the system has Composer v1 installed. Update to Composer 2 using the following command</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-H</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">composer</span><span class="token plain"> self-update</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="file_exists-open_basedir-restriction-in-effect">file_exists(): open_basedir restriction in effect<a href="#file_exists-open_basedir-restriction-in-effect" class="hash-link" aria-label="Direct link to file_exists(): open_basedir restriction in effect" title="Direct link to file_exists(): open_basedir restriction in effect" translate="no">​</a></h3>
<p>If you aren&#x27;t able to adjust the open_basedir restrictions the following steps may help:</p>
<ol>
<li class="">Delete bootstrap/cache/config.php</li>
<li class="">Delete all log files in storage/logs</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ive-forgotten-my-password-and-cannot-reset-it-help">I&#x27;ve forgotten my password and cannot reset it, HELP!<a href="#ive-forgotten-my-password-and-cannot-reset-it-help" class="hash-link" aria-label="Direct link to I&#x27;ve forgotten my password and cannot reset it, HELP!" title="Direct link to I&#x27;ve forgotten my password and cannot reset it, HELP!" translate="no">​</a></h3>
<p>If you have command line access, you can reset your password manually by following the following steps. From the command line, navigate to the project directory and run</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">php artisan tinker</span><br></span></code></pre></div></div>
<p>Then find the id of the user for the password reset</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">User::all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Retrieve the user</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">$user</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> User::find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id_of_user_to_find</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Now lets reset the password</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">$user</span><span class="token plain">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Hash::make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;password&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token variable" style="color:#36acaa">$user</span><span class="token plain">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```bash</span><br></span></code></pre></div></div></div></div></div><div class="row"><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/invoiceninja/invoiceninja.github.io/tree/v5-rework/docs/self-host/self-host-troubleshooting.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2026-02-21T02:20:41.000Z" itemprop="dateModified">Feb 21, 2026</time></b></span></div></div></footer></div></div></article><div class="row"><div class="col col--12"><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/self-host/self-host-installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Self Host Installation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/self-host/self-host-updating"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Self Host Updating</div></a></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#general-troubleshooting-steps" class="table-of-contents__link toc-highlight">General Troubleshooting Steps</a></li><li><a href="#incomplete--unsuccessful-in-app-updates" class="table-of-contents__link toc-highlight">Incomplete / Unsuccessful in app updates</a><ul><li><a href="#error-target-class-view-does-not-exist" class="table-of-contents__link toc-highlight">ERROR: Target class [view] does not exist</a></li></ul></li><li><a href="#downgrading-to-a-specific-version" class="table-of-contents__link toc-highlight">Downgrading to a Specific Version</a><ul><li><a href="#step-1-backup-your-installation" class="table-of-contents__link toc-highlight">Step 1: Backup Your Installation</a></li><li><a href="#step-2-download-the-target-version" class="table-of-contents__link toc-highlight">Step 2: Download the Target Version</a></li><li><a href="#step-3-extract-the-files" class="table-of-contents__link toc-highlight">Step 3: Extract the Files</a></li><li><a href="#step-4-clear-caches" class="table-of-contents__link toc-highlight">Step 4: Clear Caches</a></li><li><a href="#step-5-clean-up" class="table-of-contents__link toc-highlight">Step 5: Clean Up</a></li><li><a href="#step-6-verify-the-installation" class="table-of-contents__link toc-highlight">Step 6: Verify the Installation</a></li><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes</a></li></ul></li><li><a href="#sqlstate42s22-column-not-found" class="table-of-contents__link toc-highlight">SQLSTATE[42S22]: Column not found:</a></li><li><a href="#cron-not-running--queue-not-running" class="table-of-contents__link toc-highlight">Cron not running / Queue not running</a></li><li><a href="#pdfs-dont-appear-to-be-updating" class="table-of-contents__link toc-highlight">PDFs don&#39;t appear to be updating</a></li><li><a href="#email-not-sending" class="table-of-contents__link toc-highlight">Email not sending</a><ul><li><a href="#mail-mailer-configuration" class="table-of-contents__link toc-highlight">Mail Mailer configuration</a></li></ul></li><li><a href="#godaddy-email-sending-woes" class="table-of-contents__link toc-highlight">GoDaddy email sending woes</a></li><li><a href="#pdf-conversion-issues" class="table-of-contents__link toc-highlight">PDF conversion issues.</a><ul><li><a href="#phantom-js" class="table-of-contents__link toc-highlight">Phantom JS</a></li><li><a href="#hosted-invoice-ninja-pdf-generation" class="table-of-contents__link toc-highlight">Hosted Invoice Ninja PDF generation</a></li></ul></li><li><a href="#platform-specific-issues" class="table-of-contents__link toc-highlight">Platform specific issues</a><ul><li><a href="#general-advice" class="table-of-contents__link toc-highlight">General advice</a></li><li><a href="#process-has-been-signaled-with-signal-5" class="table-of-contents__link toc-highlight">Process has been signaled with signal &quot;5&quot;</a></li><li><a href="#erroneous-data-format-for-unserializing-symfonycomponentroutingcompiledroute" class="table-of-contents__link toc-highlight">Erroneous data format for unserializing &#39;Symfony\Component\Routing\CompiledRoute&#39;</a></li><li><a href="#unable-to-connect-to-database-after-installation" class="table-of-contents__link toc-highlight">Unable to connect to database after installation</a></li><li><a href="#nginx-413--request-entity-too-large" class="table-of-contents__link toc-highlight">Nginx: 413 – Request Entity Too Large</a></li><li><a href="#proxy-configuration" class="table-of-contents__link toc-highlight">Proxy configuration.</a></li><li><a href="#problems-with-migration" class="table-of-contents__link toc-highlight">Problems with migration</a></li><li><a href="#libatkso-not-loading-for-google" class="table-of-contents__link toc-highlight">libatk.so not loading for Google</a></li><li><a href="#webcron-configuration" class="table-of-contents__link toc-highlight">WebCron configuration</a></li><li><a href="#installing-in-a-subdirectory" class="table-of-contents__link toc-highlight">Installing in a subdirectory.</a></li><li><a href="#endless-setup-loop" class="table-of-contents__link toc-highlight">Endless setup loop</a></li><li><a href="#flock-expects-parameter-1-to-be-resource-bool-given" class="table-of-contents__link toc-highlight">flock() expects parameter 1 to be resource, bool given</a></li><li><a href="#unresponsive-ui" class="table-of-contents__link toc-highlight">Unresponsive UI</a></li><li><a href="#logo-not-appearing-in-the-pdf" class="table-of-contents__link toc-highlight">Logo not appearing in the PDF</a></li><li><a href="#communication-link-failure-1153-got-a-packet-bigger-than-max_allowed_packet" class="table-of-contents__link toc-highlight">Communication link failure: 1153 Got a packet bigger than &#39;max_allowed_packet&#39;</a></li><li><a href="#500-error-when-editing-pdf-templates" class="table-of-contents__link toc-highlight">500 error when editing PDF templates</a></li><li><a href="#500-error-when-trying-to-login-or-edit-company-details" class="table-of-contents__link toc-highlight">500 error when trying to login or edit company details</a></li><li><a href="#unresolvable-dependency-resolving-parameter-0--array-options--in-class-apputilscssinlinerplugin" class="table-of-contents__link toc-highlight">Unresolvable dependency resolving [Parameter #0 [ array $options ]] in class App\Utils\CssInlinerPlugin</a></li><li><a href="#uncaught-errorexception-collectionoffsetexistskey" class="table-of-contents__link toc-highlight">Uncaught ErrorException Collection::offsetExists($key)</a></li><li><a href="#file_exists-open_basedir-restriction-in-effect" class="table-of-contents__link toc-highlight">file_exists(): open_basedir restriction in effect</a></li><li><a href="#ive-forgotten-my-password-and-cannot-reset-it-help" class="table-of-contents__link toc-highlight">I&#39;ve forgotten my password and cannot reset it, HELP!</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/user-guide">User Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/self-host/self-host-installation">Self Host</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api-reference/invoice-ninja-api-reference">API Reference</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://forum.invoiceninja.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://invoiceninja.slack.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/invoiceninja/invoiceninja" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.invoiceninja.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Invoice Ninja. All rights reserved.</div></div></div></footer></div>
</body>
</html>