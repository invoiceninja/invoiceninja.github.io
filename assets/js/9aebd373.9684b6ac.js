"use strict";(globalThis.webpackChunkinvoiceninja_docs=globalThis.webpackChunkinvoiceninja_docs||[]).push([[30225],{86261(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"developer-guide/api/authentication","title":"Authentication","description":"Base login","source":"@site/docs/developer-guide/api/authentication.md","sourceDirName":"developer-guide/api","slug":"/developer-guide/api/authentication","permalink":"/docs/developer-guide/api/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/invoiceninja/invoiceninja.github.io/tree/v5-rework/docs/developer-guide/api/authentication.md","tags":[],"version":"current","lastUpdatedAt":1771640441000,"sidebarPosition":1,"frontMatter":{"title":"Authentication","sidebar_position":1},"sidebar":"developerGuide","previous":{"title":"Developer guide","permalink":"/docs/developer-guide/"},"next":{"title":"Clients","permalink":"/docs/developer-guide/api/clients"}}');var t=i(74848),s=i(28453);const o={title:"Authentication",sidebar_position:1},r=void 0,d={},l=[{value:"Base login",id:"base-login",level:2},{value:"X-API-SECRET header",id:"x-api-secret-header",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"base-login",children:"Base login"}),"\n",(0,t.jsx)(n.p,{children:"The minimum required fields for authenticating against the API is an email and password"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'http://ninja.test/api/v1/login\' \\\n-H "Content-Type:application/json" \\\n-d \'{"email":"demo@invoiceninja.com","password":"Password0"}\' \\\n-H "X-Requested-With: XMLHttpRequest";\n'})}),"\n",(0,t.jsx)(n.p,{children:"The return response is a CompanyUser object which contains child relations of the user / company and its associated entities"}),"\n",(0,t.jsx)(n.p,{children:"[truncated response]"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:' \t{\n        "permissions": "",\n        "notifications": {\n            "email": []\n        },\n        "settings": {},\n        "is_owner": true,\n        "is_admin": true,\n        "is_locked": false,\n        "updated_at": 1631673918,\n        "archived_at": 0,\n        "created_at": 1631673918,\n        "permissions_updated_at": 1631709918,\n        "ninja_portal_url": "",\n        "user": {\n            "id": "q9wdL84djP",\n            "first_name": "Price Strosin",\n            "last_name": "Dr. Estrella Ortiz",\n            "email": "small@example.com",\n            "last_login": 1631674051,\n            "oauth_user_token": "",\n            "company_user": {\n                "permissions": "",\n                "notifications": {\n                    "email": []\n                },\n                "settings": {},\n                "is_owner": true,\n                "is_admin": true,\n                "is_locked": false,\n                "updated_at": 1631673918,\n                "archived_at": 0,\n                "created_at": 1631673918,\n                "permissions_updated_at": 1631709918,\n                "ninja_portal_url": ""\n            }\n        },\n        "company": {\n            "id": "kQBeX78dyK",\n            "company_key": "vlyh36bobfixnoyxdd6jkahdfwdse77glu5pgbjwqlurraqpphx3zdoce5batvx2",\n            "update_products": true,\n            "subdomain": "",\n            "portal_mode": "domain",\n            "portal_domain": "http:\\/\\/ninja.test:8000",\n            "settings": {\n                "auto_archive_invoice": false,\n                "lock_invoices": "off",\n            }\n            "documents": [],\n            "users": [\n                {\n                    "id": "q9wdL84djP",\n                    "first_name": "Price Strosin",\n                    "last_name": "Dr. Estrella Ortiz",\n                    "email": "small@example.com",\n                    "has_password": false,\n                    "oauth_user_token": "",\n                    "company_user": {\n                        "permissions": "",\n                        "notifications": {\n                            "email": []\n                        },\n                        "settings": {},\n                        "is_owner": true,\n                }\n            ],\n            "designs": [],\n            "clients": [],\n            "invoices": [],\n\n'})}),"\n",(0,t.jsx)(n.p,{children:"You are able to append some query parameters which can include additional information in the response."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"http://ninja.test/api/login?include_static=true\n"})}),"\n",(0,t.jsxs)(n.p,{children:['This will include a data array (These are datetime / payment terms and other "static" data that is used in the selectors of the administrator panel) located ',(0,t.jsx)(n.a,{href:"https://github.com/invoiceninja/invoiceninja/blob/v5-stable/app/Utils/Statics.php",children:"here"})]}),"\n",(0,t.jsx)(n.h2,{id:"x-api-secret-header",children:"X-API-SECRET header"}),"\n",(0,t.jsx)(n.p,{children:"To improve the resilience of the login route, you may also append an additional header"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"X-API-SECRET\n"})}),"\n",(0,t.jsx)(n.p,{children:"This value would need to match the .env variable"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"API_SECRET\n"})}),"\n",(0,t.jsx)(n.p,{children:"A full example of a login using the X-API-SECRET would be as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'http://ninja.test/api/v1/login\' \\\n-H "Content-Type:application/json" \\\n-d \'{"email":"demo@invoiceninja.com","password":"Password0"}\' \\\n-H "X-API-SECRET: SuperSecretSecret" \\\n-H "X-Requested-With: XMLHttpRequest";\n```bash\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);