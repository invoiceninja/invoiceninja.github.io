"use strict";(globalThis.webpackChunkinvoiceninja_docs=globalThis.webpackChunkinvoiceninja_docs||[]).push([[58079],{43349(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"user-guide/expenses","title":"Expenses","description":"The Expenses module enables you to manage and track your organization\'s business related expenses, whether they are goods, or services. Expense records also support billing them to your clients, so you can pass along the costs directly through your invoices. Effective use of the expense module can help you track and monitor your organization\'s cash flow, and keep up with your taxes.","source":"@site/docs/user-guide/expenses.md","sourceDirName":"user-guide","slug":"/user-guide/expenses","permalink":"/docs/user-guide/expenses","draft":false,"unlisted":false,"editUrl":"https://github.com/invoiceninja/invoiceninja.github.io/tree/v5-rework/docs/user-guide/expenses.md","tags":[],"version":"current","lastUpdatedAt":1771640441000,"sidebarPosition":10,"frontMatter":{"title":"Expenses","sidebar_position":10},"sidebar":"userGuide","previous":{"title":"E-Signatures (beta coming soon!)","permalink":"/docs/user-guide/esignatures"},"next":{"title":"Invoices","permalink":"/docs/user-guide/invoices"}}');var i=t(74848),o=t(28453);const r={title:"Expenses",sidebar_position:10},a=void 0,l={},d=[{value:"Expenses Module View",id:"expenses-module-view",level:2},{value:"Viewing/Editing an Expense",id:"viewingediting-an-expense",level:2},{value:"Details",id:"details",level:3},{value:"Notes",id:"notes",level:3},{value:"Additional Info",id:"additional-info",level:3},{value:"Taxes",id:"taxes",level:3},{value:"Documents",id:"documents",level:3},{value:"Logged",id:"logged",level:3},{value:"Pending",id:"pending",level:3},{value:"Invoiced",id:"invoiced",level:3},{value:"Archived",id:"archived",level:3},{value:"Deleted",id:"deleted",level:3},{value:"Tips",id:"tips",level:2},{value:"Expense Inbound Email (Self Host Only)",id:"expense-inbound-email-self-host-only",level:2},{value:"Inbound Providers",id:"inbound-providers",level:3},{value:"Mailgun",id:"mailgun",level:4},{value:"Brevo",id:"brevo",level:4},{value:"SetUp with Own MailServer",id:"setup-with-own-mailserver",level:4},{value:"SetUp Mindee OCR",id:"setup-mindee-ocr",level:4},{value:"1. (Optional) SetUp Mindee Account and Update ENV",id:"1-optional-setup-mindee-account-and-update-env",level:4},{value:"2. SetUp your Inboud Mail Provider",id:"2-setup-your-inboud-mail-provider",level:4},{value:"3. (Optional) Prepare your current email mailbox",id:"3-optional-prepare-your-current-email-mailbox",level:4},{value:"4. SetUp IN",id:"4-setup-in",level:4},{value:"5. Test the system",id:"5-test-the-system",level:4}];function c(e){const n={a:"a",admonition:"admonition",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",source:"source",strong:"strong",ul:"ul",video:"video",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.em,{children:"Expenses"})," module enables you to manage and track your organization's business related expenses, whether they are goods, or services. Expense records also support billing them to your clients, so you can pass along the costs directly through your invoices. Effective use of the expense module can help you track and monitor your organization's cash flow, and keep up with your taxes."]}),"\n",(0,i.jsxs)(n.video,{width:"100%",controls:!0,children:["\n  ",(0,i.jsx)(n.source,{src:"/assets/videos/expenses/create_expense.mp4",type:"video/mp4"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"expenses-module-view",children:"Expenses Module View"}),"\n",(0,i.jsxs)(n.p,{children:["When you select the ",(0,i.jsx)(n.em,{children:"Expenses"})," module from the navigation menu on the left hand side of the screen, you will be taken to the table view listing and sorting all available expense records."]}),"\n",(0,i.jsxs)(n.p,{children:["From the table view you can sort expense records by the various status filters on top of the table. You can use the ",(0,i.jsx)(n.em,{children:"Filter"})," text box to search for an expense number, vendor, or amount. A ",(0,i.jsx)(n.em,{children:"More Actions"})," menu to the right of each entry in the table shows a list of available management actions you can take against an expense record, such as editing, cloning to a new expense record, cloning to a new recurring expense record, archiving, or deleting."]}),"\n",(0,i.jsx)(n.h2,{id:"viewingediting-an-expense",children:"Viewing/Editing an Expense"}),"\n",(0,i.jsx)(n.p,{children:"Simply click on an expense number from the table to view/edit that expense."}),"\n",(0,i.jsx)(n.p,{children:"The view/edit panel for an expense record has all the details about the record broken into four sections, as follows:"}),"\n",(0,i.jsx)(n.h3,{id:"details",children:"Details"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Status"}),": the status of the expense - it's automatically set; see See ",(0,i.jsx)(n.a,{href:"#lifecycle_of_an_expense",children:"Lifecycle of an Expense"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Expense Number"}),": the expense number is best left alone, so it can be automatically generated by Invoice Ninja. The policies governing generated numbers can be found in ",(0,i.jsx)(n.em,{children:"Settings"})," > ",(0,i.jsx)(n.em,{children:"Generated Numbers"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Vendor"}),": Link the expense to a vendor by selecting an available vendor record from the list here. (Vendor = who the expense is paid TO)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Client"}),": Link the expense to a client by selecting an available client record. When creating an invoice from an expense, the new invoice will also be automatically be assigned to this client."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Project"}),": select a project the expense is linked to"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Category"}),": put the expense in an expense category - expense categories can also be managed from ",(0,i.jsx)(n.em,{children:"Settings > Expense Settings"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User"}),": link an admin portal user to the expense. The User option can be used in the reports for tracking, but can also be used to give a specific user permission to view/edit an individual record."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tax"}),": ",(0,i.jsx)(n.em,{children:"Expense Tax Rates"})," must first be enabled under ",(0,i.jsx)(n.em,{children:"Settings > Tax Settings"})," for this tax option to show up. Here you can select a tax rate to apply to the expense if ",(0,i.jsx)(n.em,{children:"Taxes > By Rate"})," is selected in the expense, or enter the tax name and tax amount if ",(0,i.jsx)(n.em,{children:"Taxes > By Amount"})," is selected in the expense.\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["NOTE that you select the tax rate/amount here on the left, but control how the tax is applied on the right under the ",(0,i.jsx)(n.em,{children:"Taxes"})," panel\nbased tax, to a custom flat tax."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Amount"}),": enter the total expense amount"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Currency"}),": Currency you paid your expense in, automatically populated with the default currency of the vendor assigned to the expense. If not specified, currency is treated as your default company currency."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Date"}),": Date of the expense (defaults to today). Note that this is the date that the vendor invoices you for the expense, not the date of your payment to the vendor."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Public Notes"})," - Use this field to describe the expense. When creating an invoice for a client from an expense record, the public notes are included in the line item description for the expense."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Private Notes"})," - The value of this field is only viewable by users of the admin portal, so you can use it to make notes to yourself and other coworkers about the expense record."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"additional-info",children:"Additional Info"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Should be invoiced"}),": you can turn this toggle on if the expense should be invoiced to a client (see ",(0,i.jsx)(n.a,{href:"#more_actions_dropdown",children:"More Actions dropdown menu"})," for next steps)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Mark Paid"}),": Enable this to indicate that your organization has paid the vendor for this expense. This is ",(0,i.jsx)(n.em,{children:"not"})," to indicate a payment from a client. After checking ",(0,i.jsx)(n.em,{children:"Mark Paid"}),", these options will appear below:\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Payment Type"}),": Select the payment type your organization used to pay the vendor with."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Date"}),": Enter the date your organization paid the vendor (defaults to today)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Transaction Reference"}),": Enter a transaction reference code or number if applicable."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Convert currency"}),": If the expense is billed in a currency other than your own default currency, enabling this allows you to set the currency you prefer to pay with, and an exchange rate, to calculate how much the expense cost in your preferred currency.\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Exchange Rate"}),": the current exchange rate will be automatically set when selecting a currency, but can be manually adjusted"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Converted Amount"}),": this amount is calculated as follows: ",(0,i.jsx)(n.em,{children:"Expense Amount"})," * ",(0,i.jsx)(n.em,{children:"Exchange Rate"})," = ",(0,i.jsx)(n.em,{children:"Converted Amount"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add Documents to Invoice"}),": Enable this feature to include any documents attached to an expense, with the documents attached to the invoice when you create an invoice out of the expense record."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Taxes"}),": configure how the expense is taxed to you in more detail."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:'Note that when you view your reports, expenses will be categorized by the currency of the expense/vendor, not the currency selected under "Convert Currency". If you wish to consolidate your profit and loss totals under one currency, you should select your own currency for each expense record, and use the converted amount for the expense amount, leaving any reference to a foreign currency out of the record details.'})}),"\n",(0,i.jsx)(n.h3,{id:"taxes",children:"Taxes"}),"\n",(0,i.jsx)(n.p,{children:"The taxes section is where you control how taxes are applied to the expense."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Expense Tax Rates"})," must first be enabled under ",(0,i.jsx)(n.em,{children:"Settings > Tax Settings"}),' for expense taxes to work (or it will say "Item tax rates are disabled").']}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.em,{children:"Taxes"})," panel on the bottom right of the expense edit screen will let you choose one of these options:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Enter Taxes: Configure how the expense is taxed to you in more detail. Change between rate or amount to change the ",(0,i.jsx)(n.em,{children:"Tax"})," field (under the details tab) from a percent based tax, to a custom flat tax.\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["By Rate: this is selected by default. You can select a tax rate under ",(0,i.jsx)(n.em,{children:"Details"})," to apply to the expense."]}),"\n",(0,i.jsxs)(n.li,{children:["By Amount: allows you to manually enter a ",(0,i.jsx)(n.em,{children:"Tax Name"})," and ",(0,i.jsx)(n.em,{children:"Tax Amount"})," under ",(0,i.jsx)(n.em,{children:"Details"})," to apply to the expense. Note that you can apply up to three tax rates/amounts to an expense, based on the settting ",(0,i.jsx)(n.em,{children:"Settings > Tax Settings > Expense Tax Rates"})," where you can select ",(0,i.jsx)(n.em,{children:"Disabled, One Tax Rate, Two Tax Rates,"})," or ",(0,i.jsx)(n.em,{children:"Three Tax Rates"}),". For example, if you have ",(0,i.jsx)(n.em,{children:"Three Tax Rates"})," as the enabled option, you will see three ",(0,i.jsx)(n.em,{children:"Tax"})," options on the left."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Inclusive Taxes: Enable this option if the taxes are inclusive to the cost of the expense, rather than exclusive. For example:\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Exclusive tax is applied on top of the expense cost, like so: 100 + 10% = $110 total (100 + 10)."}),"\n",(0,i.jsx)(n.li,{children:"Inclusive tax is when taxes are deducted from the amount the vendor bills you, and included in your expense amount, rather than tacked on top of what you pay the vendor, like so: 100 + 10% = $100 total (90.91 +9.09)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Here's a video of enabling the Expense Tax Rates, adding a new Expense Category, and recording a new expense using these options:"}),"\n",(0,i.jsxs)(n.video,{width:"100%",controls:!0,children:["\n  ",(0,i.jsx)(n.source,{src:"/assets/videos/expenses/expense_settings_taxes.mp4",type:"video/mp4"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"more_actions_dropdown",children:"More Actions dropdown menu"}),"\n",(0,i.jsxs)(n.p,{children:["You can use the ",(0,i.jsx)(n.em,{children:"More Actions"})," dropdown menu (if on the expenses table view) or the ",(0,i.jsx)(n.em,{children:"Save"})," dropdown arrow menu in the top right corner of the expense edit panel, to see a list of management actions that can be taken against the expense record:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Clone: this will create a new expense record with the same details as the existing expense record, for today's date."}),"\n",(0,i.jsx)(n.li,{children:"Clone to Recurring: clone the expense record to a new recurring expense"}),"\n",(0,i.jsx)(n.li,{children:"Archive"}),"\n",(0,i.jsx)(n.li,{children:"Delete"}),"\n",(0,i.jsx)(n.li,{children:"Restore: only visible if an archived/deleted expense is selected - lets you restore the expense to logged/paid status"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["These additional options will be visible only if ",(0,i.jsx)(n.em,{children:"Should be invoiced"})," is checked:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Invoice Expense: this will create a new invoice record with the expense details automatically entered as a line item on the invoice"}),"\n",(0,i.jsx)(n.li,{children:"Add to Invoice: this will let you add the expense to an existing invoice with the expense details automatically entered as a line item on the invoice. A list of the client's invoices will show for selection."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"documents",children:"Documents"}),"\n",(0,i.jsx)(n.p,{children:"The Documents tab supports uploading files such as documents, pictures, and more to allow you to share them with the client when attached to an invoice (if enabled) or with other users of the admin portal."}),"\n",(0,i.jsx)(n.h2,{id:"lifecycle_of_an_expense",children:"Lifecycle of an Expense"}),"\n",(0,i.jsx)(n.p,{children:"The following describe the lifecycle of an expense record"}),"\n",(0,i.jsx)(n.h3,{id:"logged",children:"Logged"}),"\n",(0,i.jsxs)(n.p,{children:["An expense's default state is ",(0,i.jsx)(n.em,{children:"Logged"}),", when an expense is created. An expense is marked logged whether or not you have reported that you have paid the vendor for the expense yet."]}),"\n",(0,i.jsx)(n.h3,{id:"pending",children:"Pending"}),"\n",(0,i.jsxs)(n.p,{children:["An expense that has ",(0,i.jsx)(n.em,{children:"Should be Invoiced"})," enabled, making it billable to a client, is automatically changed to a ",(0,i.jsx)(n.em,{children:"Pending"})," state."]}),"\n",(0,i.jsx)(n.h3,{id:"invoiced",children:"Invoiced"}),"\n",(0,i.jsxs)(n.p,{children:["An expense record is automatically changed to ",(0,i.jsx)(n.em,{children:"Invoiced"})," after the expense has been added to a client invoice. Note that an expense is marked ",(0,i.jsx)(n.em,{children:"Invoiced"})," simply by being on an invoice, and its state doesn't change whether or not that invoice has been paid for by the client. The overview tab of the expense record's preview panel will link you to the invoice that expense is attached to."]}),"\n",(0,i.jsx)(n.h3,{id:"archived",children:"Archived"}),"\n",(0,i.jsx)(n.p,{children:'An expense record can manually be archived, which simply hides it from view in the table or list of active expenses. The details of archived expenses are still included in reports. You can view archived expenses by changing filters in the table view, and you can use the "Restore" function to return an archived expense to its former state.'}),"\n",(0,i.jsx)(n.h3,{id:"deleted",children:"Deleted"}),"\n",(0,i.jsx)(n.p,{children:'An expense record can manually be deleted, which will remove it from view, and remove it from any reports as well. Deleted expense records can be seen by changing your filters when viewing the table or list of expenses, and using the "Restore" function can return the deleted expense record to its former state.'}),"\n",(0,i.jsx)(n.h2,{id:"tips",children:"Tips"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["You could just create an expense only with an amount and nothing else... but it's best to always organize your expenses by vendor/client. For example, under ",(0,i.jsx)(n.em,{children:"Reports"})," you're able to report on expenses by status, clients, vendors, projects, and categories. Also, expenses will be shown in categories under the ",(0,i.jsx)(n.em,{children:"Profit and Loss"})," report."]}),"\n",(0,i.jsxs)(n.li,{children:["You can see all expenses attached to a specific vendor: ",(0,i.jsx)(n.em,{children:"Vendor Details > Expenses"})]}),"\n",(0,i.jsxs)(n.li,{children:["You can see all expenses attached to a specific client: ",(0,i.jsx)(n.em,{children:"Client Details > Expenses"})]}),"\n",(0,i.jsxs)(n.li,{children:["Expenses can have default options configured under ",(0,i.jsx)(n.em,{children:"Settings > Expense Settings"}),". See ",(0,i.jsx)(n.a,{href:"/docs/user-guide/basic-settings#expense_settings",children:"Expense Settings"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"expense-inbound-email-self-host-only",children:"Expense Inbound Email (Self Host Only)"}),"\n",(0,i.jsx)(n.p,{children:"This feature allows you to configure an e-mail address to accept attachments from vendors, clients and internal users which can then be processed using Mindee to perform data extraction and create expense records. Zugferd xml files are also supported and are able to be automatically parsed and converted into an expense."}),"\n",(0,i.jsx)(n.p,{children:"The system works by configuring an e-mail address to accept attachments, the attachments (and the email body text) are stored on file and an expense record is created. The system will attempt to extract data from the document and insert it into the expense record."}),"\n",(0,i.jsx)(n.p,{children:"The following settings are available:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Enable Expense Mailbox (Enabled/Disables the processing of emails)"}),"\n",(0,i.jsx)(n.li,{children:"Expense Mailbox E-Mail (The e-mail address to process which will be receiving the emails)"}),"\n",(0,i.jsx)(n.li,{children:"Allow Company Users (Toggles whether internal users can send emails to the configured expense mailbox)"}),"\n",(0,i.jsx)(n.li,{children:"Allow Vendors (Toggles whether vendors can send emails to the configured expense mailbox)"}),"\n",(0,i.jsx)(n.li,{children:"Allow Unknown Senders (Toggles whether unknown semders can send emails to the configured expense mailbox)"}),"\n",(0,i.jsx)(n.li,{children:"Allowed Email Addresses (A comma separated list of domains which are allowed to send emails to the configured expense mailbox)"}),"\n",(0,i.jsx)(n.li,{children:"Blocked Email Addresses (A comma separated list of domains which are blocked from sending emails to the configured expense mailbox)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"inbound-providers",children:"Inbound Providers"}),"\n",(0,i.jsx)(n.h4,{id:"mailgun",children:"Mailgun"}),"\n",(0,i.jsx)(n.p,{children:"To ensure delivery, you have to configure all used mailgun regions with a recieving configuration using store & notify."}),"\n",(0,i.jsx)(n.p,{children:'Create and setup your mailgun account\nPrepare your DNS settings for inbound mail processing, by setting up necessary MX records\nCreate a receiving route using store and notify\n3a. Go to Receiving Section and click on "Create Route"\n3b. Create your route by selecting your mailbox configured in invoiceninja and add notify endpoint /api/v1/mailgun_inbound_webhook'}),"\n",(0,i.jsx)(n.h4,{id:"brevo",children:"Brevo"}),"\n",(0,i.jsxs)(n.p,{children:["To ensure delivery you have to configure brevo inbound parsing according to: ",(0,i.jsx)(n.a,{href:"https://developers.brevo.com/docs/inbound-parse-webhooks",children:"https://developers.brevo.com/docs/inbound-parse-webhooks"})]}),"\n",(0,i.jsxs)(n.p,{children:["Create and setup your brevo account\nPrepare your DNS settings for inbound mail processing, by setting up necessary MX records\nRegister the webhook via the brevo api to the following notify endpoint: /api/v1/brevo_inbound_webhook?token=brevo-api-token\nSetUp Postmark\nTo ensure delivery you have to configure brevo inbound parsing according to: ",(0,i.jsx)(n.a,{href:"https://developers.brevo.com/docs/inbound-parse-webhooks",children:"https://developers.brevo.com/docs/inbound-parse-webhooks"})]}),"\n",(0,i.jsx)(n.h4,{id:"setup-with-own-mailserver",children:"SetUp with Own MailServer"}),"\n",(0,i.jsx)(n.p,{children:"If you want to use your own mailbox, you have to either redirect the mail to a mailbox of one of the providers above or use a provider for inbound directly.\nWe recommend to use one of these providers hosted on a subdomain f.ex. invoicing.xxx.com directly or to use the auto-generated mailbox of postmark when you are using redirect."}),"\n",(0,i.jsx)(n.h4,{id:"setup-mindee-ocr",children:"SetUp Mindee OCR"}),"\n",(0,i.jsx)(n.p,{children:"To parse a document IN can use OCR solutions like Mindee. Mindee offers to process documents and guess the contents using AI. Each account has 250 pages for free, which makes it very suiteable for small busineses using self-hosted."}),"\n",(0,i.jsx)(n.p,{children:"Use the following .env variable to configure your mindee api key:"}),"\n",(0,i.jsx)(n.p,{children:"MINDEE_API_KEY=your-api-key"}),"\n",(0,i.jsx)(n.h4,{id:"1-optional-setup-mindee-account-and-update-env",children:"1. (Optional) SetUp Mindee Account and Update ENV"}),"\n",(0,i.jsx)(n.p,{children:"First of All, you have to create your Mindee Account (if you wanna use OCR), without it IN will only use standards like ZUGFeRD if the document supports it. Create an API Key and save it to the env file of your IN instance:\nMINDEE_API_KEY=API-KEY\nI suggest checking how many free pages are included in your free mindee subscription. Default should be 250, but this may varry.\nI you wanna change your local tracked contingent per month to avoid unnecessary payments to mindee, you can use the following envs to customize the behavior:"}),"\n",(0,i.jsx)(n.p,{children:"MINDEE_MONTHLY_LIMIT\nMINDEE_DAILY_LIMIT\nMINDEE_ACCOUNT_MONTHLY_LIMIT\nMINDEE_ACCOUNT_DAILY_LIMIT\nif the limit is exceeded mindee is treated as not configured. (ignored)"}),"\n",(0,i.jsx)(n.h4,{id:"2-setup-your-inboud-mail-provider",children:"2. SetUp your Inboud Mail Provider"}),"\n",(0,i.jsxs)(n.p,{children:["SetUp your account at mailgun/postmark/brevo and follow the steps to setup inbound mail parsing (each service does it differently)\nYou can look at the original PR (#9042) , where I have documented more informations about each provider. I will now describe how I did it with brevo:\na) Set an API-Key for the brevo endpoint within your env:\nINBOUND_WEBHOOK_TOKEN=XXX\nyou can use somthing like: ",(0,i.jsx)(n.a,{href:"https://generate-random.org/api-key-generator",children:"https://generate-random.org/api-key-generator"}),"\nb) Read and do this (setup your DNS and infos about it): ",(0,i.jsx)(n.a,{href:"https://developers.brevo.com/docs/inbound-parse-webhooks",children:"https://developers.brevo.com/docs/inbound-parse-webhooks"}),"\nc) Create an API key in the Console\nd) Use this api-documentation to send the needed requests to setup your webhook: ",(0,i.jsx)(n.a,{href:"https://developers.brevo.com/reference/getwebhooks-1",children:"https://developers.brevo.com/reference/getwebhooks-1"})," => please append the following at the end of your url ?token=XXX (this is the api token from a)\nI highly suggest trying it first out if the webhook is working by using an url from ",(0,i.jsx)(n.a,{href:"https://webhook.site",children:"https://webhook.site"}),". This website will show you the contents of the webhooks beeing send, after you sended an email to the inbound webhook email. You can use the recieving url as the target for the webhooks created in d)"]}),"\n",(0,i.jsx)(n.h4,{id:"3-optional-prepare-your-current-email-mailbox",children:"3. (Optional) Prepare your current email mailbox"}),"\n",(0,i.jsxs)(n.p,{children:["I am using gmail with google workspace, so i created a forward rules within admin.google.com to redirect all emails from ",(0,i.jsx)(n.a,{href:"mailto:xxx@my-domain.de",children:"xxx@my-domain.de"})," to my internal email at brevo for recieving email at brevo and dont publishing the brevo email. You can also use the rules for redirect within the mailbox itself"]}),"\n",(0,i.jsx)(n.h4,{id:"4-setup-in",children:"4. SetUp IN"}),"\n",(0,i.jsx)(n.p,{children:"a) Go To Settings->Expenses and enable the Inbound Mailbox\nb) Paste your brevo email into the reciever field (this has to be unique regarding the whole IN instance)\nc) Allow the senders you want to be able to send you expenses via mail.\n=> I use enable my vendors and from my own company and added as whitelist also my personal email from my phone"}),"\n",(0,i.jsx)(n.h4,{id:"5-test-the-system",children:"5. Test the system"}),"\n",(0,i.jsx)(n.p,{children:"a) Send an Email to the brevo inbound email\nb) Check if an expense got created\nc) If not: check if the request from brevo is present => this sometimes takes up to 5min\nd) If yes: check the logs for any errors and report them as an issue if you have any trouble resolving them"})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);