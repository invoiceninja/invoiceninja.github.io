"use strict";(globalThis.webpackChunkinvoiceninja_docs=globalThis.webpackChunkinvoiceninja_docs||[]).push([[94943],{35355(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"self-host/self-host-updating","title":"Self Host Updating","description":"Docker","source":"@site/docs/self-host/self-host-updating.md","sourceDirName":"self-host","slug":"/self-host/self-host-updating","permalink":"/docs/self-host/self-host-updating","draft":false,"unlisted":false,"editUrl":"https://github.com/invoiceninja/invoiceninja.github.io/tree/v5-rework/docs/self-host/self-host-updating.md","tags":[],"version":"current","lastUpdatedAt":1771640441000,"sidebarPosition":5,"frontMatter":{"title":"Self Host Updating","sidebar_position":5},"sidebar":"selfHost","previous":{"title":"Self Host Troubleshooting","permalink":"/docs/self-host/self-host-troubleshooting"},"next":{"title":"Env Variables","permalink":"/docs/self-host/env-variables"}}');var i=t(74848),r=t(28453);const o={title:"Self Host Updating",sidebar_position:5},l=void 0,a={},d=[{value:"Docker",id:"docker",level:3},{value:"Git users",id:"git-users",level:3},{value:"Shared hosting / ZIP builds",id:"shared-hosting--zip-builds",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"docker",children:"Docker"}),"\n",(0,i.jsx)(n.p,{children:"When we tag a new release, a new image is built. All that is required for docker users is to bring down the container, pull in the new image and then bring the container up again, these three commands are all that are needed."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose down\ndocker-compose pull\ndocker-compose up\n"})}),"\n",(0,i.jsx)(n.h3,{id:"git-users",children:"Git users"}),"\n",(0,i.jsx)(n.p,{children:"If you have installed Invoice Ninja using just git, then all that is required is to pull in the changes and to call the post-update command. These commands are as follows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git pull\ncomposer install -o --no-dev\nphp artisan ninja:post-update\n"})}),"\n",(0,i.jsx)(n.h3,{id:"shared-hosting--zip-builds",children:"Shared hosting / ZIP builds"}),"\n",(0,i.jsx)(n.p,{children:"If you have installed the application using the precompiled .zip file, then the internal self updater should perform all the necessary tasks to bring your app up to the latest version. The only strict requirements are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The directory is owned recursively by the web user."}),"\n",(0,i.jsx)(n.li,{children:"The scheduler cron is running."}),"\n",(0,i.jsxs)(n.li,{children:["1024M for the PHP ",(0,i.jsx)(n.code,{children:"memory_limit"})," to run the update"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The self updater will pull the latest release from our Github repository, extract and overwrite the system files. Prior to attempting any of this, the system performs a recursive file check to ensure ",(0,i.jsx)(n.em,{children:"all"})," files are owned by the webuser."]}),"\n",(0,i.jsxs)(n.p,{children:["If the update button does not work, you can alternatively download the invoiceninja.tar file and overwrite the folder of your installation, note that there are 3 files always:  ",(0,i.jsx)(n.a,{href:"https://github.com/invoiceninja/invoiceninja/releases",children:"https://github.com/invoiceninja/invoiceninja/releases"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"invoiceninja.tar - 170 MB or 500 MB roughly\nSource code (zip) - 15 MB roughly\nSource code (tar.gz) - 14 MB roughly\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Please ensure to delete the .git folder prior to attempting updates on v5.1.50 and over. The updater will fail silently if any hidden folders are present."})}),"\n",(0,i.jsx)(n.p,{children:"After running the updater you'll want to run the update route"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"https://url.com/update?secret=\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The value of the secret query parameter is found in the .env file under the key ",(0,i.jsx)(n.code,{children:"UPDATE_SECRET"})]})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);